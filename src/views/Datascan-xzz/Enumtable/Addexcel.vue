<template>
  <UploadExcel @updatae-excel-list-by-son="getExcelList" ref="uploadComponent" />
  <el-divider />

  <el-text class="mx-1" type="success">å½“å‰excelæ–‡ä»¶å¤¹çš„æ‰€æœ‰å†…å®¹:</el-text>
  <el-table :data="tableList" style="width: 40%">
    <el-table-column type="index" width="50" />
    <el-table-column prop="sheetName" label="è¡¨å" />
    <el-table-column prop="length" label="æ•°æ®é•¿åº¦" />
  </el-table>
  <el-divider />
  <el-button type="primary" @click="confirmEvent">ç¡®è®¤æäº¤</el-button>
</template>

<script lang="ts" setup>
// import { ElMessage } from 'element-plus'
import UploadExcel from './UploadExcel.vue'
import { Ref, ref } from 'vue'
import { isArray } from 'lodash-es'
// import { addEnumitem } from '@/api/datascan'
// import { useI18n } from '@/hooks/web/useI18n'

const tableList: Ref<any[]> = ref([])

const getExcelList = (data: any[]) => {
  console.log('ğŸš€ ~ file: Addexcel.vue:26 ~ getExcelList ~ data:', data)
  if (isArray(data)) {
    tableList.value = data
  }
}

const confirmEvent = async () => {
  // if (apivalue.value == '') {
  //   return ElMessage({
  //     message: 'è¯·å…ˆé€‰æ‹©æšä¸¾é¡¹ç›®',
  //     type: 'error'
  //   })
  // }
  // if (tableList.value.length === 0) {
  //   return ElMessage({
  //     message: 'è¯·å…ˆä¸Šä¼ excelæšä¸¾æ–‡ä»¶',
  //     type: 'error'
  //   })
  // }
  await updateEnumitem()
}
const uploadComponent: Ref = ref(null)
// const clearForm = () => {
//   uploadComponent.value.clearFiles()
// }
const updateEnumitem = async () => {
  // try {
  //   const res = await addEnumitem({
  //     itemJson: JSON.stringify(tableList.value)
  //   })
  //   if (res?.data?.id) {
  //     clearForm()
  //     ElMessage({
  //       message: t('common.addSuccess'),
  //       type: 'success'
  //     })
  //   }
  // } catch (err) {
  //   console.log('ğŸš€ ~ file: Addexcel.vue:145 ~ updateEnumitem ~ err:', err)
  //   ElMessage({
  //     message: t('common.addFail'),
  //     type: 'error'
  //   })
  // } finally {
  // }
}
</script>
